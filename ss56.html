
<!DOCTYPE html>
<html lang="en">

<head> 

      <script type="text/javascript" src="//data527.click/0336f8f5efe77883708b/1171c98adc/?placementName=default"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="Momin Rocks" />
    <meta name="designer" content="momin The Rocks" />
    <meta name="description" content="Enjoy Free Stream">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.2/plyr.css" />
    <link href="https://cdn.jsdelivr.net/gh/halfmoonui/halfmoon@1.0.4/css/halfmoon.min.css" rel="stylesheet" />
    <title>Proximity</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://cdn.plyr.io/3.6.2/plyr.polyfilled.js"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
        }

        video {
            width: 100vw;
            height: 100vh;
            object-fit: contain;
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>

<body>
    <script>
        const confirmMessage = "Join For More Links!!";
        
        const allowedDomain = "maxplay-tv.fun";

        if (confirm(confirmMessage)) {
            window.location.href = telegramURL;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const m3u8Url = urlParams.get('url');

            if (!m3u8Url) {
                console.error('No m3u8 URL provided');
                alert('Error: No video stream URL provided.');
                return;
            }

            const videoElement = document.createElement('video');
            videoElement.setAttribute('controls', '');
            videoElement.setAttribute('playsinline', '');

            const sourceElement = document.createElement('source');
            sourceElement.src = m3u8Url;
            sourceElement.type = 'application/x-mpegURL';
            videoElement.appendChild(sourceElement);

            const playerOptions = {};

            if (Hls.isSupported()) {
                const hlsConfig = { maxMaxBufferLength: 100 };
                const hls = new Hls(hlsConfig);
                hls.loadSource(m3u8Url);
                hls.attachMedia(videoElement);
                hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {
                    const availableQualities = hls.levels.map(level => level.height);
                    playerOptions.quality = {
                        default: availableQualities[0],
                        options: availableQualities,
                        forced: true,
                        onChange: quality => {
                            hls.levels.forEach((level, index) => {
                                if (level.height === quality) {
                                    hls.currentLevel = index;
                                }
                            });
                        }
                    };
                    const player = new Plyr(videoElement, playerOptions);

                    // Handle screen orientation change
                    player.on('enterfullscreen', () => {
                        if (screen.orientation && screen.orientation.lock) {
                            screen.orientation.lock('landscape').catch(err => {
                                console.warn('Orientation lock failed:', err);
                            });
                        }
                    });

                    player.on('exitfullscreen', () => {
                        if (screen.orientation && screen.orientation.unlock) {
                            screen.orientation.unlock();
                        }
                    });
                });
                window.hls = hls;
            } else {
                new Plyr(videoElement, playerOptions);
            }

            document.body.appendChild(videoElement);
        });

        const currentDomain = window.location.hostname;
        if (currentDomain !== allowedDomain) {
            window.location.href = telegramURL;
        }
    </script>
</body>

</html>
